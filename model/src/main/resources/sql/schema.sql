CREATE TABLE IF NOT EXISTS T_PERSON
(
    PERSON_ID        INTEGER      not null,
    PLACE            VARCHAR(256),
    OCCUPATION       VARCHAR(256),
    NOTE             VARCHAR(256),
    GENDER           CHAR(1)      not null,
    FIRST_NAME       VARCHAR(256) not null,
    MIDDLE_NAME      VARCHAR(256),
    LAST_NAME        VARCHAR(256),
    MAIDEN_NAME      VARCHAR(256),
    PARENT_FAMILY_ID INTEGER,
    FAMILY_ID        INTEGER
);
create sequence SEQ_PERSON start with 1;

CREATE TABLE IF NOT EXISTS T_FAMILY
(
    FAMILY_ID INTEGER not null,
    MOTHER_ID INTEGER,
    FATHER_ID INTEGER
);
create sequence SEQ_FAMILY start with 1;

CREATE TABLE IF NOT EXISTS T_CHILDREN
(
    FAMILY_ID INTEGER,
    CHILD_ID  INTEGER
);

CREATE TABLE IF NOT EXISTS T_LIFE_EVENT
(
    EVENT_ID   INTEGER     not null,
    TYPE       VARCHAR(32) not null,
    PREFIX     VARCHAR(3),
    PLACE      VARCHAR(256),
    NOTE       VARCHAR(256),
    EVENT_DATE DATE        not null
);
create sequence SEQ_EVENT start with 1;

CREATE TABLE IF NOT EXISTS T_PERSON_EVENT
(
    PERSON_ID INTEGER not null,
    EVENT_ID  INTEGER not null 
);

CREATE TABLE IF NOT EXISTS T_FAMILY_EVENT
(
    FAMILY_ID INTEGER not null,
    EVENT_ID  INTEGER not null
);

alter table T_PERSON
    add constraint PK_PERSON PRIMARY KEY (PERSON_ID);

alter table T_FAMILY
    add constraint PK_FAMILY PRIMARY KEY (FAMILY_ID);

alter table T_LIFE_EVENT
    add constraint PK_EVENT PRIMARY KEY (EVENT_ID);

alter table T_PERSON_EVENT
    add constraint PK_PERSON_EVENT PRIMARY KEY (PERSON_ID, EVENT_ID);

alter table T_FAMILY_EVENT
    add constraint PK_FAMILY_EVENT PRIMARY KEY (FAMILY_ID, EVENT_ID);

alter table T_PERSON
    add constraint FK_PERSON_PARENT_FAMILY FOREIGN KEY (PARENT_FAMILY_ID) REFERENCES T_FAMILY (FAMILY_ID);
alter table T_PERSON
    add constraint FK_PERSON_FAMILY FOREIGN KEY (FAMILY_ID) REFERENCES T_FAMILY (FAMILY_ID);

alter table T_FAMILY
    add constraint FK_FAMILY_MOTHER FOREIGN KEY (MOTHER_ID) REFERENCES T_PERSON (PERSON_ID);
alter table T_FAMILY
    add constraint FK_FAMILY_FATHER FOREIGN KEY (FATHER_ID) REFERENCES T_PERSON (PERSON_ID);

alter table T_CHILDREN
    add constraint FK_CHILDREN_FAMILY FOREIGN KEY (FAMILY_ID) REFERENCES T_FAMILY (FAMILY_ID);
alter table T_CHILDREN
    add constraint FK_CHILDREN_PERSON FOREIGN KEY (CHILD_ID) REFERENCES T_PERSON (PERSON_ID);

alter table T_PERSON_EVENT
    add constraint FK_PERSON_EVENT_PERSON FOREIGN KEY (PERSON_ID) REFERENCES T_PERSON (PERSON_ID);
alter table T_PERSON_EVENT
    add constraint FK_PERSON_EVENT_EVENT FOREIGN KEY (EVENT_ID) REFERENCES T_LIFE_EVENT (EVENT_ID);

alter table T_FAMILY_EVENT
    add constraint FK_FAMILY_EVENT_FAMILY FOREIGN KEY (FAMILY_ID) REFERENCES T_FAMILY (FAMILY_ID);
alter table T_FAMILY_EVENT
    add constraint FK_FAMILY_EVENT_EVENT FOREIGN KEY (EVENT_ID) REFERENCES T_LIFE_EVENT (EVENT_ID);
